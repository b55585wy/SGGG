# 网页 v1.0 核心功能设计（横屏版）

> 目标设备：PC 浏览器 / iPad 横屏（1024×768 ~ 1366×1024）
> 设计风格参考：前端简单设计规范 v1.0

---

## 一、版本范围（同上）

**v1.0 核心**：Generate → Preview → Reader(tap/choice) → Feedback

**渐进推后**：真实图片 / drag·mimic·record_voice / history_context / PWA

---

## 二、横屏 Shell 结构

当前代码的 `max-w-lg mx-auto`（512px）是**手机布局**，必须改掉。

### 2.1 整体 Layout 容器

三页共用一个全屏容器，不同页面有不同的内部分栏方式：

```
html, body → min-h-screen w-screen overflow-hidden（Reader）
             min-h-screen w-screen overflow-auto（Generate / Preview）
```

### 2.2 三页 Shell 对比

| 页面 | 布局模式 | 核心特征 |
|------|---------|---------|
| Generate | 单栏居中 | `max-w-2xl mx-auto`，水平留白，可滚动 |
| Preview | 左右两栏 | 左侧内容 / 右侧操作，固定高度不滚动 |
| Reader | 左右两栏全屏 | 左图右文，`100dvh` 固定，绝对沉浸 |

---

## 三、页面设计（横屏）

### 3.1 Generate 页（家长填表，单栏居中）

**理由**：表单密度高，适合居中单栏，左右留白给人专注感。宽度限制 `max-w-2xl`（672px）避免 input 过宽难以扫视。

```
┌────────────────────────────────────────────────────────────────────┐
│                          [导航区，可选]                             │
├────────────────────────────────────────────────────────────────────┤
│                                                                    │
│              ┌──────────────────────────────────┐                 │
│              │  ✦ STORY GENERATOR               │                 │
│              │  Create a Story                  │                 │
│              │  Fill in details...              │                 │
│              ├──────────────────────────────────┤                 │
│              │  ▼ Child Profile           [∧]   │                 │
│              │    Nickname / Age / Gender        │                 │
│              ├──────────────────────────────────┤                 │
│              │  ▼ Meal Context            [∧]   │                 │
│              │    Food / Score / Mood / Text     │                 │
│              ├──────────────────────────────────┤                 │
│              │  ▶ Story Settings          [∨]   │                 │
│              ├──────────────────────────────────┤                 │
│              │  [       Generate Story        ]  │                 │
│              └──────────────────────────────────┘                 │
│                                                                    │
└────────────────────────────────────────────────────────────────────┘
  max-w-2xl mx-auto px-8 py-8，页面可竖向滚动
```

---

### 3.2 Preview 页（家长审阅，左右两栏）

**理由**：家长需要同时看"故事内容"和"操作按钮"，左右分栏避免频繁滚动。Design Logic 放右栏更醒目。

```
┌────────────────────────────────────────────────────────────────────┐
│  [← 重新生成]                               STORY PREVIEW         │
├───────────────────────────────────┬────────────────────────────────┤
│                                   │                                │
│  LEFT  ≈ 55%                      │  RIGHT  ≈ 45%                 │
│  （故事内容）                      │  （判断区）                   │
│                                   │                                │
│  小恐龙布鲁的蔬菜大冒险             │  ┌── bg-accent-light ──────┐  │
│  当布鲁遇到陌生的西兰花...          │  │ 💡 DESIGN LOGIC        │  │
│                                   │  │ 本故事针对孩子对新食物的 │  │
│  ┌───────────────────────────┐    │  │ 回避行为，采用Lv2干预... │  │
│  │ 故事简介                  │    │  └────────────────────────┘  │
│  │ 布鲁是一只不爱吃蔬菜的     │    │                                │
│  │ 小恐龙，这天他走进了...    │    │  [西兰花] [adventure] [Lv2]   │
│  └───────────────────────────┘    │  [8 pages]                    │
│                                   │                                │
│  ┌───────────────────────────┐    │  ─────────────────────────    │
│  │ ENDING PREVIEW            │    │                                │
│  │ "太棒了！你是勇敢的..."   │    │  ┌──────────────────────────┐  │
│  │ 下个目标：用手摸一摸它     │    │  │  ↺ Regen (0/2)          │  │
│  └───────────────────────────┘    │  └──────────────────────────┘  │
│                                   │                                │
│                                   │  ┌──────────────────────────┐  │
│                                   │  │   Start Reading  →      │  │
│                                   │  └──────────────────────────┘  │
│                                   │                                │
├───────────────────────────────────┴────────────────────────────────┤
│  [重生成展开区 AnimatePresence：全宽浮层，覆盖在内容上方，有关闭X]  │
└────────────────────────────────────────────────────────────────────┘
  左栏：overflow-y-auto（内容可能较长）
  右栏：sticky top，固定不滚动
  总高：100dvh
```

---

### 3.3 Reader 页（儿童阅读，左右全屏分栏）⭐ 最重要

**理由**：绘本天然横屏产品，左图右文是标准绘本翻页格式。图片占据约 60% 宽，右侧文字大、行间距大，供儿童阅读。

```
┌────────────────────────────────────────────────────────────────────┐
│  [← 退出]   ███████████████░░░░░░░░ 3/8   [🔊 朗读]              │  ← 顶部通栏（高 44px）
├────────────────────────────┬───────────────────────────────────────┤
│                            │                                       │
│  LEFT  ≈ 58%               │  RIGHT  ≈ 42%                        │
│  （插图区）                  │  （文字 + 互动 + 导航）               │
│                            │                                       │
│                            │                                       │
│   ┌──────────────────────┐ │   布鲁走进了森林，                    │
│   │                      │ │   看见了一棵奇怪的                    │  ← text-2xl
│   │  [skeleton shimmer]  │ │   绿色大树，树上挂着                   │    leading-relaxed
│   │                      │ │   很多小圆球...                       │
│   │  object-cover        │ │                                       │
│   │  w-full h-full       │ │                                       │
│   │                      │ │   ── InteractionLayer ──              │
│   │                      │ │                                       │
│   │                      │ │   点击布鲁的爪子！                    │
│   │                      │ │        ╭──────╮                       │
│   │                      │ │        │  👆  │  (脉冲)               │
│   │                      │ │        ╰──────╯                       │
│   │                      │ │                                       │
│   └──────────────────────┘ │                                       │
│                            │  ┌───────────┐  ┌──────────────────┐ │
│                            │  │  ← Prev   │  │    Next →       │ │
│                            │  └───────────┘  └──────────────────┘ │
│                            │                                       │
└────────────────────────────┴───────────────────────────────────────┘
  整页：flex flex-row，100dvh，overflow:hidden
  左栏：relative，图片 absolute inset-0 object-cover
  右栏：flex flex-col，px-10 py-8，justify-between
         顶部：故事文字（flex-1，overflow-y-auto）
         中部：InteractionLayer
         底部：Prev / Next 按钮
```

**顶部通栏**（横跨左右，高 44px）

```
┌────────────────────────────────────────────────────────────────────┐
│  [← Exit]        ████████████░░░░░  3 / 8        [🔊 朗读]       │
│  px-6            进度条（绝对居中）                px-6            │
└────────────────────────────────────────────────────────────────────┘
  bg-surface/80 backdrop-blur-sm，z-10，border-b border-border-light
```

**右栏文字尺寸（儿童友好）**

| 元素 | 尺寸 |
|------|------|
| 故事正文 | `text-2xl leading-loose`（大！） |
| 行为锚点标签 | `text-sm text-muted` |
| 互动说明文字 | `text-base text-muted` |
| 页码 | `text-sm font-mono` |

**页面切换动效**（横屏专用，左右滑入）

```ts
// 向后翻页：新页从右滑入
initial={{ opacity: 0, x: 60 }}
animate={{ opacity: 1, x: 0 }}
exit={{ opacity: 0, x: -60 }}

// 向前翻页（上一页）：新页从左滑入
initial={{ opacity: 0, x: -60 }}
animate={{ opacity: 1, x: 0 }}
exit={{ opacity: 0, x: 60 }}
```

**InteractionLayer（右栏内，居中显示）**

```
none    → 不渲染，空间留给文字

tap     → 居中 80×80 圆形按钮，脉冲动效
          文字在上，按钮在下，spacing gap-4

choice  → 竖向按钮列表，宽度铺满右栏
          每项 py-3 rounded-xl warm-100 底
          stagger 入场

占位    → 🚧 即将上线  +  [跳过继续]
```

---

### 3.4 Feedback Modal（横屏居中弹窗，不变）

全屏遮罩，`max-w-sm` 居中，横竖屏表现一致。

```
┌── 全屏遮罩 backdrop-blur-sm ──────────────────────────────────────┐
│                                                                   │
│              ┌────────── max-w-sm ─────────────────┐             │
│              │  How did it go?              [✕]    │             │
│              │  [👀] [🌸] [✋] [💧] [🍪] [😊] [⭐] │             │
│              │  grid-cols-4（7个按钮，最后行3个）    │             │
│              │  ─────────────────────────────────  │             │
│              │  [Additional notes textarea]        │             │
│              │  [        Submit Feedback         ] │             │
│              └────────────────────────────────────┘             │
│                                                                   │
└───────────────────────────────────────────────────────────────────┘
```

---

## 四、CSS 布局实现要点

### Shell 容器改法

```tsx
// main.tsx — 三页用不同容器，不用 max-w-lg 统包

// Generate / Preview：可滚动
<main className="min-h-screen bg-[var(--color-background)]">
  <Routes>
    <Route path="/"        element={<GeneratePage />} />
    <Route path="/preview" element={<PreviewPage />} />
    <Route path="/reader"  element={<ReaderPage />} />
  </Routes>
</main>
```

```tsx
// GeneratePage 内层
<div className="max-w-2xl mx-auto px-8 py-10 pb-16">
  ...
</div>

// PreviewPage 内层
<div className="flex h-screen overflow-hidden">
  <div className="w-[55%] overflow-y-auto px-10 py-8 border-r border-[var(--color-border-light)]">
    {/* 左栏：故事内容 */}
  </div>
  <div className="w-[45%] flex flex-col px-10 py-8">
    {/* 右栏：Design Logic + 操作 */}
  </div>
</div>

// ReaderPage 内层
<div className="flex flex-col h-screen overflow-hidden">
  {/* 顶部通栏 */}
  <div className="h-11 flex items-center ...">...</div>
  {/* 左右主区域 */}
  <div className="flex flex-1 overflow-hidden">
    <div className="relative w-[58%]">
      {/* 插图，absolute inset-0 */}
    </div>
    <div className="w-[42%] flex flex-col justify-between px-10 py-8 overflow-y-auto">
      {/* 文字 + 互动 + 导航 */}
    </div>
  </div>
</div>
```

---

## 五、关键尺寸参数

| 参数 | 值 | 说明 |
|------|-----|------|
| 目标视口 | 1024×768 ~ 1366×1024 | iPad 横屏 / PC |
| Generate 内容宽 | `max-w-2xl`（672px） | 表单不过宽 |
| Preview 左栏 | 55% | 内容展示 |
| Preview 右栏 | 45% | 决策操作 |
| Reader 左栏（图） | 58% | 图片主视觉 |
| Reader 右栏（文） | 42% | 文字 + 互动 |
| Reader 顶栏高 | 44px（h-11） | 薄，不占主视觉 |
| Reader 故事文字 | `text-2xl leading-loose` | 儿童易读 |
| 图片比例 | 铺满左栏，object-cover | 不留空白 |

---

## 六、验收补充（横屏专项）

| 编号 | 验收项 |
|------|--------|
| V-13 | Preview 页在 1024px 宽屏下左右分栏，不是单列 |
| V-14 | Reader 页左侧图片铺满高度，无空白条 |
| V-15 | Reader 右栏文字尺寸为 text-2xl，儿童可清晰阅读 |
| V-16 | Reader 顶部进度条横跨全宽 |
| V-17 | 翻页动效为横向滑动（x 轴），与横屏方向一致 |
| V-18 | Generate 在宽屏下居中，左右有留白，不撑满全宽 |
