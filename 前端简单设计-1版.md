# 前端简单设计规范 v1.0

> AI 儿童互动绘本系统 — 设计风格基准文档
> 适用平台：PC 浏览器 / iPad 横屏

---

## 一、设计原则

| 原则 | 说明 |
|------|------|
| **克制简洁** | 留白为主，不堆砌视觉元素，内容本身就是主角 |
| **家长 + 儿童双角色** | Generate / Preview 面向家长（信息密度适中）；Reader 面向儿童（大元素、高对比） |
| **暖调中性** | 用暖白底色 + 石灰灰色系，不突兀、易长时间阅读 |
| **绿色主动作** | 唯一强调色为翠绿（Emerald）→ 引导用户点击最重要的行动 |
| **弹簧动效** | 所有过渡用 spring 曲线，不用 ease，给人"有质感"的感觉 |

---

## 二、色彩系统（Design Tokens）

```css
/* 全局 CSS 变量 */
--color-background:    #fafaf9;   /* 暖白，页面底色 */
--color-foreground:    #18181b;   /* 近黑，主文字 */
--color-surface:       #ffffff;   /* 纯白，卡片底色 */

/* 强调色 — 翠绿 */
--color-accent:        #059669;   /* 主强调 */
--color-accent-hover:  #047857;   /* hover 深一档 */
--color-accent-light:  #d1fae5;   /* 浅绿背景（标注/选中态） */

/* 辅助色 */
--color-muted:         #71717a;   /* 次要文字、图标 */
--color-border:        #e7e5e4;   /* 标准边框 */
--color-border-light:  rgba(231, 229, 228, 0.5);  /* 卡片轻边框 */

/* 错误态 */
--color-error:         #e11d48;   /* 玫红 */
--color-error-light:   #fff1f2;   /* 错误浅底 */

/* 暖灰层级 */
--color-warm-50:       #fafaf9;   /* 等同 background */
--color-warm-100:      #f5f5f4;   /* hover 背景、表单底 */
--color-warm-200:      #e7e5e4;   /* 二级 hover */
```

### 使用规则

- **主按钮**：`bg-accent` 白字
- **次要按钮**：`border-border` 透明底，hover 用 `warm-100`
- **选中/激活态**：`bg-accent-light` + `border-accent` + `text-accent`
- **错误态**：`bg-error-light` + `text-error`
- **设计逻辑模块（信任校准）**：强制用 `bg-accent-light` 底色高亮展示，不可藏起

---

## 三、字体系统

```css
font-family: 'Geist', system-ui, -apple-system, sans-serif;
-webkit-font-smoothing: antialiased;
```

| 层级 | Tailwind 类 | 用途 |
|------|------------|------|
| 大标题 | `text-3xl md:text-4xl font-semibold tracking-tighter leading-none` | 页面主标题（Generate / Preview） |
| 卡片标题 | `text-xl font-semibold tracking-tight` | Modal 标题 |
| 段落正文 | `text-lg leading-relaxed` | Reader 故事正文（大，儿童阅读） |
| 普通正文 | `text-sm leading-relaxed` | Preview 摘要、描述 |
| 按钮文字 | `text-sm font-semibold` | 主次按钮 |
| 标签/标注 | `text-xs font-medium tracking-wide` | 表单 label、标签 |
| Monospace 徽章 | `text-xs font-mono font-medium tracking-wider uppercase` | 页面小类目（"Story Preview" 等） |
| 极小 | `text-[10px] font-medium` | FeedbackModal 图标下方文字 |

---

## 四、间距 & 圆角

### 圆角规则

| 元素 | 圆角 |
|------|------|
| 大卡片（Section / 内容卡） | `rounded-2xl` |
| Modal / 弹窗 | `rounded-2xl` |
| 按钮（主/次） | `rounded-xl` |
| 小按钮、Tag、徽章 | `rounded-full` 或 `rounded-xl` |
| 表单 Input / Textarea | `rounded-xl` |
| 图标按钮（退出、关闭） | `rounded-lg` |

### 内边距规则

| 元素 | Padding |
|------|---------|
| 大卡片内部 | `p-5` 或 `p-6` |
| 主要按钮 | `py-3.5` |
| 次要/小按钮 | `py-2.5 px-4` 或 `py-3 px-4` |
| 顶部操作栏按钮 | `px-3 py-2` |
| 表单 Input | `px-3 py-2.5`（即 `0.625rem 0.75rem`） |

### 页面主内容

- 底部留白：`pb-12`（避免最后一个按钮被遮挡）
- 主区域各模块间距：`space-y-4`（Generate 表单区）

---

## 五、阴影规则

只用一种阴影：远距离轻柔投影，营造"悬浮卡片"感，不用传统边框阴影。

```css
/* 标准卡片阴影 */
box-shadow: 0 20px 40px -15px rgba(0, 0, 0, 0.03);

/* 强调卡片（StoryCard / Modal）*/
box-shadow: 0 20px 40px -15px rgba(0, 0, 0, 0.05);

/* Modal 弹窗（覆盖层更深） */
box-shadow: 0 20px 40px -15px rgba(0, 0, 0, 0.10);
```

> 所有卡片同时保留 `border border-[var(--color-border-light)]`，阴影 + 轻边框双重定义层次。

---

## 六、按钮规范

### 主按钮（Primary）

```
bg-accent → text-white → hover:bg-accent-hover
disabled:opacity-40 disabled:cursor-not-allowed
active:scale-[0.98] transition-all
rounded-xl py-3.5 font-semibold
```

- 页面全宽：`w-full`
- 用于：Generate 提交、确认开始阅读、提交反馈

### 次要按钮（Secondary）

```
border border-border → hover:bg-warm-100
active:scale-[0.98] transition-all
rounded-xl font-semibold text-sm
```

- 用于：重生成、上一页、退出

### 选择按钮（Toggle/Chip）

```
/* 未选中 */
border-[var(--color-border-light)] hover:border-[var(--color-border)]

/* 选中 */
border-[var(--color-accent)] bg-[var(--color-accent-light)] text-[var(--color-accent)]
```

- 用于：重生成原因选择、分支选项

### 图标按钮（Ghost）

```
p-1 rounded-lg hover:bg-[var(--color-warm-100)] transition-colors
```

- 用于：关闭 Modal（X 按钮）

---

## 七、表单规范

```css
/* .form-input */
width: 100%;
padding: 0.625rem 0.75rem;
border-radius: 0.75rem;
border: 1px solid var(--color-border-light);
background: var(--color-warm-50);
font-size: 0.875rem;
color: var(--color-foreground);
transition: border-color 0.15s;
outline: none;

/* focus 态 */
border-color: var(--color-accent);
```

- Placeholder 颜色：`text-muted`
- Slider（range）：`accent-[var(--color-accent)]`
- Select：与 input 同一 class
- Textarea：`resize-none`，固定高度（`h-20`）

---

## 八、动效系统（Motion）

### 核心弹簧配置

```ts
// 标准 spring（大多数场景）
const spring = { type: 'spring', stiffness: 100, damping: 20 }

// 快速弹出（Modal、Interaction 完成反馈）
const fastSpring = { type: 'spring', stiffness: 200, damping: 20 }

// 页翻动（Reader 换页）
const pageSpring = { type: 'spring', stiffness: 200, damping: 25 }
```

### 入场动画类型

| 场景 | 初始值 | 终止值 |
|------|--------|--------|
| 页面顶部标题 | `{ opacity: 0, y: -12 }` | `{ opacity: 1, y: 0 }` |
| 卡片/内容块 | `{ opacity: 0, y: 12 }` | `{ opacity: 1, y: 0 }` |
| StoryCard | `{ opacity: 0, y: 20 }` | `{ opacity: 1, y: 0 }` |
| 列表项（分支选项） | `{ opacity: 0, x: -16 }` | `{ opacity: 1, x: 0 }` |
| Modal | `{ opacity: 0, scale: 0.95, y: 16 }` | `{ opacity: 1, scale: 1, y: 0 }` |
| 错误提示 | `{ opacity: 0 }` | `{ opacity: 1 }` |

### 错开延迟（Stagger）

Preview 页面各卡片依次入场，delay 步长 `0.05s`：
```ts
delay: 0, 0.05, 0.10, 0.15, 0.20
```

分支选项按钮：`delay: index * 0.1`

### 页面切换（Reader）

```ts
// 进入
initial={{ opacity: 0, x: 40 }}
// 离开
exit={{ opacity: 0, x: -40 }}
// AnimatePresence mode="wait"
```

### 进度条

```ts
animate={{ width: `${((pageIdx + 1) / total) * 100}%` }}
transition={{ type: 'spring', stiffness: 100, damping: 20 }}
```

### Tap 互动脉冲

```ts
animate={{ scale: [1, 1.1, 1] }}
transition={{ repeat: Infinity, duration: 1.5 }}
```

---

## 九、图标系统

- 库：`@phosphor-icons/react`
- 尺寸：`size={14}` 小操作 / `size={16}` 普通按钮 / `size={18-20}` 标题旁 / `size={24}` FeedbackModal / `size={28-32}` Interaction 大图标 / `size={48}` 错误占位
- Weight：
  - `fill`：强调、选中态、填充图标
  - `bold`：按钮内、导航
  - `light`：大图标（装饰性）、次要

---

## 十、加载 & 骨架屏

### Skeleton（图片加载中）

```css
@keyframes skeleton-shimmer {
  0%   { background-position: -200% 0; }
  100% { background-position:  200% 0; }
}

.skeleton-shimmer {
  background: linear-gradient(90deg, #e7e5e4 25%, #d6d3d1 50%, #e7e5e4 75%);
  background-size: 200% 100%;
  animation: skeleton-shimmer 1.5s ease-in-out infinite;
}
```

- StoryCard 图片区：固定 `aspect-[4/3]`，加载中显示 shimmer，失败显示 `ImageBroken` 图标 + 文字

### Spinner（API 请求中）

```html
<span class="inline-block w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin" />
```
- 页面级 loading（等待跳转）：`w-8 h-8 border-2 border-accent/30 border-t-accent`

---

## 十一、页面布局规范

### 通用 Shell（Layout Wrapper）

```
[顶部 Header / 导航]
  ↓ 主区域（max-w-2xl 居中，px-4 md:px-6，pb-12）
[内容区]
```

### Generate 页

```
[标题区] ← Sparkle 图标 + 类目标签 + 大标题 + 描述
[表单区] ← 3个 Section 折叠卡片（Child Profile / Meal Context / Story Settings）
  Section = 顶部 toggle 按钮 + 内容区（px-5 pb-5 space-y-4）
[错误提示]（条件显示）
[主按钮] ← 全宽"Generate Story"
```

### Preview 页

```
[标题区] ← BookOpen 图标 + 类目标签 + 故事标题 + 副标题
[摘要卡片]
[Design Logic 卡片] ← 必须 bg-accent-light 高亮，不可省略
[元信息 Tags] ← 食物 / 故事类型 / 难度等级 / 页数
[结尾预览卡片]
[错误提示]（条件显示）
[重生成展开区]（AnimatePresence 条件渲染）
[底部双按钮] ← 2:3 比例 col-span-2 / col-span-3
  左："Regen" 次要按钮
  右："Start Reading" 主按钮
```

### Reader 页

```
[TTS 不支持提示横幅]（条件显示）
[顶部操作栏] ← Exit（左）｜页码 X/N（中）｜Read Aloud（右）
[进度条] ← h-1 accent 颜色，spring 动画
[StoryCard] ← 图片 4:3 + 文字 p-6 text-lg
  + [InteractionLayer] ← 紧跟 card 下方
[底部导航] ← Prev（左）｜Next / Finish（右，flex-1）
[最后一页正反馈区]（条件显示）
[FeedbackModal]（全屏遮罩，backdrop-blur-sm）
```

---

## 十二、InteractionLayer 各类型外观

| type | 呈现方式 |
|------|---------|
| `none` | 不渲染 |
| `tap` | 居中 80px 圆形虚线按钮（dashed border），内含脉冲手势图标；完成后变实线 + CheckCircle |
| `choice` | 垂直列表，每项全宽圆角按钮，warm-100 底色，选中同 Toggle 样式；stagger 入场 |
| `drag` | 图标方块 → 箭头 → 目标方块（虚线边框），点击目标完成 |
| `mimic` | 居中宽按钮，accent 主色，完成后变 accent-light + CheckCircle |
| `record_voice` | error-light 底色按钮（麦克风），完成后变 accent-light；显示"Coming soon"提示 |

---

## 十三、FeedbackModal 规范

- 触发：故事读完（COMPLETED）或用户退出（ABORTED）
- 遮罩：`fixed inset-0 z-50 bg-foreground/30 backdrop-blur-sm`
- 弹窗：`max-w-sm` 居中，`rounded-2xl p-6`
- COMPLETED 态：7 个 try_level 图标按钮，`grid grid-cols-4`
- ABORTED 态：6 个 abort_reason 文字按钮，`space-y-2`
- 备注 Textarea：可选填，`h-20 resize-none`

---

## 十四、错误 & 空状态

```html
<!-- 错误提示行 -->
<p class="text-sm text-error bg-error-light px-4 py-3 rounded-xl flex items-center gap-2">
  <Warning size={16} weight="fill" /> {errorMsg}
</p>

<!-- 页面级 loading（等待数据）-->
<div class="flex items-center justify-center min-h-[60dvh]">
  <div class="w-8 h-8 border-2 border-accent/30 border-t-accent rounded-full animate-spin" />
</div>
```

---

## 十五、快速检查清单

实现新页面/组件时对照：

- [ ] 卡片用 `rounded-2xl` + `border-border-light` + 标准阴影
- [ ] 主按钮用 accent 绿色，`active:scale-[0.98]` 反馈
- [ ] 所有动效用 spring（非 ease）
- [ ] 图片区域固定高度，未加载时显示 skeleton-shimmer
- [ ] 错误态用 error / error-light 配色
- [ ] Design Logic 在 Preview 页强制显示（bg-accent-light）
- [ ] 表单 focus 态描边切换为 accent 色
- [ ] 图标尺寸与场景匹配（16 按钮 / 20 标题旁 / 32+ 大交互）
- [ ] Stagger delay 用在列表类入场动画
